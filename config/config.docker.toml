# Docker Configuration
# Optimized for Docker/Docker Compose deployment
# Uses environment variables for all configurable values

[server]
address = "0.0.0.0:8080"
trusted-platform = "${TRUSTED_PLATFORM:-}"
site_url = "${SITE_URL:-http://localhost:8080}"
api_key = "${API_KEY}"

[shortener]
code_length = 6
code_charset = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"

[admin]
username = "${ADMIN_USERNAME:-admin}"
password = "${ADMIN_PASSWORD}"

[database]
type = "${DATABASE_TYPE:-sqlite}"
log_level = 0

[database.sqlite]
path = "/app/data/shortener.db"

[database.postgres]
host = "${DATABASE_HOST:-postgres}"
port = 5432
user = "${DATABASE_USER:-shortener}"
password = "${DATABASE_PASSWORD}"
database = "${DATABASE_NAME:-shortener}"
sslmode = "${DATABASE_SSLMODE:-disable}"
timezone = "UTC"

[database.mysql]
host = "${DATABASE_HOST:-mysql}"
port = 3306
user = "${DATABASE_USER:-shortener}"
password = "${DATABASE_PASSWORD}"
database = "${DATABASE_NAME:-shortener}"
charset = "utf8mb4"
parse_time = true
loc = "Local"

[cache]
enabled = true
type = "${CACHE_TYPE:-redis}"
expire = 3600
prefix = "shorten:"

[cache.redis]
host = "${REDIS_HOST:-redis}"
port = 6379
password = "${REDIS_PASSWORD:-}"
db = 0

[cache.valkey]
host = "${VALKEY_HOST:-valkey}"
port = 6379
username = "${VALKEY_USERNAME:-}"
password = "${VALKEY_PASSWORD:-}"
db = 0

[geoip]
enabled = false
type = "ip2region"

[geoip.ip2region]
path = "/app/data/ip2region.xdb"
mode = "vector"
version = "4"

[logging]
level = "${LOG_LEVEL:-info}"
format = "json"
with_timestamp = true
with_target = true
with_thread_ids = false
with_thread_names = false
with_file = false
with_line_number = false
with_ansi = false
